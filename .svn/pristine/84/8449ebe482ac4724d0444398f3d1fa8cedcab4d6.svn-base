<template>
  <span
    v-if="!transition"
    class="cu-tag"
    :class="[type ? 'cu-tag--' + type : '', size ?? SIZE, { plain }]"
    :style="[{ paddingRight: closable ? '8px' : '' }, customStyle]"
  >
    <slot></slot>
    <span class="cu-icon-close closeicon" v-if="closable" @click="$emit('close')"></span>
  </span>
  <transition v-else name="cu-zoom-x" appear>
    <span
      class="cu-tag"
      :class="[type ? 'cu-tag--' + type : '', size, { plain }]"
      :style="[{ paddingRight: closable ? '8px' : '' }, customStyle]"
    >
      <slot></slot>
      <span class="cu-icon-close closeicon" v-if="closable" @click="handleClose"></span>
    </span>
  </transition>
</template>

<script setup lang="ts">
import { ref, nextTick } from 'vue';
import '../style/css';
import { useConfig } from '../../utils/config.js';
defineOptions({
  name: 'CuTag'
});
const emit = defineEmits(['close']);

const props = defineProps({
  type: String,
  plain: Boolean,
  size: String,
  closable: Boolean,
  transition: Boolean,
  customStyle: Object
});

const { SIZE } = useConfig();

function handleClose() {
  // show.value = false;
  nextTick(() => {
    emit('close');
  });
}
</script>
