<template>
  <span class="cu-radio-group">
    <slot></slot>
  </span>
</template>

<script setup lang="ts">
import { provide, computed } from 'vue';
import '../style/radio.css';
import { useItemValidate } from '../../../utils';
import { radioGroupProps, radioGroupEmits } from './group.props';
import { RADIOGROUP_PROVIDE } from './type';
defineOptions({
  name: 'CuRadioGroup'
});

const props = defineProps(radioGroupProps);
const emit = defineEmits(radioGroupEmits);

const { itemValidate } = useItemValidate();

const activeValue = computed(() => {
  return props.modelValue;
});

function changeItemCheck(label: string) {
  emit('update:modelValue', label);
  emit('change', label);

  itemValidate('change');
}

provide(RADIOGROUP_PROVIDE, {
  activeValue,
  changeItemCheck,
  props
});
</script>
