<template>
  <div
    class="cu-card"
    :class="[shadow, { 'turn-card': turnCard }]"
    @click="showTurn = !showTurn"
    ref="card"
    :style="style"
  >
    <div class="cu-card__container" :class="[{ turn: !showTurn && turnType === 'click' }, turnType]">
      <slot></slot>
    </div>
    <div class="cu-card__opposite" :class="[{ turn: showTurn && turnType === 'click' }, turnType]" v-if="turnCard">
      <slot name="opposite"></slot>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue';
import '../style/card.css';
import { cardProps } from './main.props';
defineOptions({
  name: 'CuCard'
});

defineProps(cardProps);

const card = ref();
const showTurn = ref(false);

const style = computed(() => {
  if (!card.value) return undefined;
  let style = card.value.getBoundingClientRect();
  let l = 0 - (style.width - style.width * 0.3) + 'px';
  return { '--l': l };
});
</script>
