<template>
  <div class="cu-option" @click="handleClick" :class="[{ active: isActive }, { disabled }]">
    <slot>{{ label }}</slot>
  </div>
</template>

<script setup lang="ts">
import { inject, computed } from 'vue';
import { optionProps } from './option.props';
import { SELECT_PROVIDE } from './type';
defineOptions({
  name: 'CuOption'
});
const props = defineProps(optionProps);

const { optionSet, props: injectProps, optionClick } = inject(SELECT_PROVIDE);
optionSet(props);

const isActive = computed(() => {
  if (injectProps.multiple) {
    return injectProps.modelValue.includes(props.value);
  } else {
    return injectProps.modelValue === props.value;
  }
});

function handleClick() {
  optionClick(props.value);
}
</script>
