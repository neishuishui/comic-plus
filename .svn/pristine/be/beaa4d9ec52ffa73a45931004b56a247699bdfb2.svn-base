<template>
  <div class="cu-elevator-item" :elevator-name="name">
    <slot></slot>
  </div>
</template>

<script setup lang="ts">
import { inject, onMounted, onBeforeUnmount, getCurrentInstance } from 'vue';
import { ELEVATOR_PROVIDE } from './type';
defineOptions({
  name: 'CuElevatorItem'
});
const props = defineProps({
  name: String,
  label: String
});

const instance = getCurrentInstance()!;

const { setItem, removeItem } = inject(ELEVATOR_PROVIDE);

onMounted(() => {
  setItem({ name: props.name, label: props.label, uid: instance.uid });
});
onBeforeUnmount(() => {
  removeItem(instance.uid);
});
</script>
